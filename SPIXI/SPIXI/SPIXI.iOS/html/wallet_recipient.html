<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>SPIXI</title>
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/bootstrap37.css">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link rel="stylesheet" type="text/css" href="css/stylewallet.css">

    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
	<script src="js/spixi.js"></script>
</head>
    
<body onload="onload()">
<div id="wrap" class="container-fluid noselect">
    
    <div id="toolbar" class="toolbar">
        <div id="backbtn" class="toolbar_back"></div>
        <div class="toolbar_text" id="title">Select Recipient</div>
    </div>
    <div class="toolbarholder">
    </div>
    
    <!-- Contacts -->
    <div id="contacts" class="tab-pane fade in">
                    
        <input type="text" id="contactInput" onkeyup="contactSearch()" placeholder="Search for contacts..">
                
        <div id="contactslist" class="container-fluid">                       
        </div>

        <div class="bottomPlaceholder"></div>
    </div>               



</div>

<script type="text/javascript">
    var searchingContacts = false;

    document.getElementById("backbtn").onclick = function() {
        location.href = "ixian:back";
    } 
    
   /* document.getElementById("sendrequest").onclick = function() {
        location.href = "ixian:sendrequest";
    }*/

            // Filter in the CONTACTS tab
            function contactSearch()
            {
                var a,i,row;
                var input = document.getElementById('contactInput');
                var filter = input.value.toUpperCase();
                var c_contactlist = document.getElementById("contactslist");
                var c_items = c_contactlist.getElementsByClassName('uchat');

                if (isBlank(filter) == true) {
                    searchingContacts = false;
                }
                else {
                    searchingContacts = true;
                }

                // Go through each element and filter out non-matching elements
                for (i = 0; i < c_items.length; i++) {
                    row = c_items[i].getElementsByTagName("div")[0];
                    a = row.getElementsByTagName("div")[1];

                    if (a.innerHTML.toUpperCase().indexOf(filter) > -1) {
                        c_items[i].style.display = "";
                    } else {
                        c_items[i].style.display = "none";
                    }
                }
            }
            
            // Clears all contacts from contacts page
            function clearContacts()
            {
                if (searchingContacts == true) {
                    return;
                }

                var contactsNode = document.getElementById("contactslist");
                while (contactsNode.firstChild) {
                    contactsNode.removeChild(contactsNode.firstChild);
                }
            }
            
            // Adds a contact to the contacts page
            function addContact(wal, name, avatar, online)
            {
                if (searchingContacts == true) {
                    return;
                }
                var indicator = "none";
                if (online == true) {
                    indicator = "block";
                }

                var contactsNode = document.getElementById("contactslist");
                
                var contactEntry = document.createElement("div");
                contactEntry.className = "uchat";
                contactEntry.innerHTML = '<a href="ixian:choose:' + wal + '"><div class="row"><div class="col-xs-2 cdesc"></div><div class="col-xs-6 contacts_name">' + name + '</div><div class="col-xs-4 contacts_avatar"><img class="contacts_avatar_img" src="' + avatar + '"/><img id="indicator" src="img/onlineIndicator.png" class="contacts_indicator" style="display:' + indicator +';"/></div></div></a>';
                
                contactsNode.appendChild(contactEntry);                             
            }

            function isBlank(str) {
                return (!str || /^\s*$/.test(str));
            }

</script>
    
</body>    
</html>