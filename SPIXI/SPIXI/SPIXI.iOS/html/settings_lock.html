<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Lock my Spixi</title>
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/bootstrap37.css">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link rel="stylesheet" type="text/css" href="css/stylesettings.css">
    <link rel="stylesheet" type="text/css" href="css/stylesecurity.css">

    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
	<script src="js/spixi.js"></script>
</head>
    
<body onload="onload()">
    <div id="wrap" class="container-fluid noselect">
        <div id="toolbar" class="toolbar">
            <div id="backbtn" class="toolbar_back"></div>
            <div class="toolbar_text" id="title">Lock my Spixi</div>
        </div>
        <div class="toolbarholder">
        </div>
        
        <div id="lock"  class="lockbutton">locked</div>
        <div id="textlocked" class="locktext" >Your Spixi is locked. You can only open it with your Password. To unlock your Spixi Account, tap on the Icon on the left.</div>
        <div id="textopen" class="locktext" style="display: none;">Create a <b>lock password</b> for your Spixi, to make sure you are the only one using your account on this device.</div>

        <div class="lockplaceholder"></div>

        <div id="lockContent" style="display: none;">
        <div class="passwordHolder">
            <input type="password" id="password" class="passwordInput" onkeyup="checkPasswordMatch()" placeholder="">
        </div>
        <div class="passwordHolder" style="margin-top: 35px;">
            <input type="password" id="passwordConfirm" class="passwordInput" onkeyup="checkPasswordMatch()" placeholder="">
        </div>
        
        <div id="passwordInfoText" class="passwordInfo" style="display: none;">The passwords you entered do not match</div>
        
        
        <div class="lock_info"> This password will be required every time you launch Spixi.</div>

        <div class="button" style="margin-top: 4px;">Lock My Spixi</div>
        </div>

    </div>
<script type="text/javascript">
    
    var locked = true;
    
    document.getElementById("backbtn").onclick = function() {
        location.href = "ixian:back";
    } 
    
    document.getElementById("lock").onclick = function () {
        
        if(locked == true)
        {
            location.href = "ixian:unlock";
        }
        else 
        {
            lock();
        }     
    }

    function lock() {
        var lockbtn = document.getElementById("lock");

        document.getElementById("textlocked").style.display = "block";
        document.getElementById("textopen").style.display = "none";

        lockbtn.style.backgroundImage = "url('img/Locked_icon.png')";
        lockbtn.innerHTML = "locked";
        locked = true;
        document.getElementById("lockContent").style.display = "none";
    }

    function unlock() {
        var lockbtn = document.getElementById("lock");

        document.getElementById("textlocked").style.display = "none";
        document.getElementById("textopen").style.display = "block";

        lockbtn.style.backgroundImage = "url('img/Open_icon.png')";
        lockbtn.innerHTML = "open";
        locked = false;
        document.getElementById("lockContent").style.display = "block";
    }

    function setLocked(lck)
    {
        locked = lck;
    }
    
    $(document).ready(function () {
  //      $("#password, #passwordConfirm").keyup(checkPasswordMatch);
    });
    
    function checkPasswordMatch() {
        var password = $("#password").val();
        var confirmPassword = $("#passwordConfirm").val();
        
        if(confirmPassword.length < 1)
        {
            return;
        }
        
        document.getElementById("passwordInfoText").style = "display: block;";

        if (password != confirmPassword)
        {
            $("#passwordInfoText").html("The passwords you entered do not match");
            document.getElementById("passwordInfoText").className = "passwordInfo";
        }
        else 
        {
            $("#passwordInfoText").html("Passwords match");
            document.getElementById("passwordInfoText").className = "passwordInfoValid";
        }
    }
    
    
    
    function isBlank(str) {
        return (!str || /^\s*$/.test(str));
    }

    function setNickname(nick) {
        document.getElementById("nicknameInput").value = nick;
    }
</script>
    
</body>
</html>