<!DOCTYPE html>
<html>

<head lang="en">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>IXIAN</title>
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="css/spixiui-intro.css">

    <link rel="stylesheet" type="text/css" href="libs/fontawesome/css/fontawesome.min.css">
    <link rel="stylesheet" type="text/css" href="libs/fontawesome/css/solid.min.css">

    
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/spixi.js"></script>
    
</head>
<body>
    <div id="wrap" class="container-fluid noselect">
        <div id="backbtn" class="intro-backarrow">
            <i class="fas fa-arrow-left"></i>
        </div>
        
        <div class="intro-logo-holder2">
            <img class="intro-logo" src="img/intrologo.png"/>
        </div>
                
        
        <!-- DescriptionBar -->
        <div class="intro-descriptionbar">
            <div class="row spixi-descriptionbar-row">
                <div class="col-2 intro-descriptionbar-icon"><i class="fa fa-save"></i></div>
                <div class="col-10 spixi-descriptionbar-row-details">
                <div>Restore access to your Spixi Account</div>
                <div>You need the Backup File and the Encryption Password to restore your existing Spixi account on this device.</div>
                </div>
            </div>
        </div>
        <!-- End DescriptionBar -->
        <hr class="intro-separator"/>            
        <div class="intro-textfield-holder">
            <input type="text" class="intro-textfield" id="password" onkeyup="checkPassword()" placeholder="Enter your Encryption Password">
        </div>            
        <hr class="intro-separator"/>
        
        <div id="selectbtn" class="intro-button small disabled">
            Select Backup File
        </div>
        <div class="intro-holder-20"></div>

        <div class="intro-text left">Set the Backup File that is associated with the Encryption Password</div>
        <hr class="intro-separator"/>

        
        <div class="intro-holder-70"></div>

        <div id="restorebtn" class="intro-button center disabled">
            RESTORE
        </div>            

        <div class="intro-holder-20"></div>            
                     
        
        <div id="overlay" class="intro-overlay" style="display: none;">
            <div class="intro-logo-holder">
                <img class="intro-logo" src="img/intrologo.png"/>
            </div>
        
            <div class="intro-overlay-title">Restoring Access to<br/>your Spixi Account</div>
            <div class="intro-overlay-loading"></div>
            <div class="intro-overlay-info"><i class="fa fa-info-circle"></i> &nbsp;This may take a while</div>
            <div class="intro-overlay-ixian"></div>
        </div>
        
    </div>
    
    
<script type="text/javascript">    
    var restorebtn = document.getElementById("restorebtn");
    var selectbtn = document.getElementById("selectbtn");
    
    document.getElementById("backbtn").onclick = function() {
        location.href = "ixian:back";       
    } 
        
    function checkPassword()
    {
        var password = $("#password").val();
        selectbtn.className = "intro-button center disabled";

        if(password.length < 1)
            return false;
        
        selectbtn.className = "intro-button small";
        return true;
    }
    
    selectbtn.onclick = function () {
        location.href = "ixian:selectfile";
    }
    
    restorebtn.onclick = function () {

        if(restorebtn.classList.contains("disabled"))
        {
            return;
        }
        
        document.getElementById("overlay").style.display = "block";    

        setTimeout(function () { restoreAccount(); }, 400);
    }
    
    function restoreAccount() {
        var pass = $("#password").val();
        if(pass.length < 1)
            return;
        
        location.href = "ixian:restore:" + pass;
    }
           
    function enableRestore()
    {
        restorebtn.className = "intro-button center";
    }
    
    function removeLoadingOverlay() {
        document.getElementById("overlay").style.display = "none";    
    }
    
</script>

</body>
</html>